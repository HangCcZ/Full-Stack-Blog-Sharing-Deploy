(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{141:function(e,t,a){},153:function(e,t,a){e.exports=a(252)},252:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(45),l=a.n(c),u=a(262),o=a(87),s=a.n(o),i=function(e){var t=e.blog;return t.comments?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,null,t.comments.map((function(e){return r.a.createElement(u.a.Item,{key:e},r.a.createElement(s.a,null,e))})))):null},m=a(5),p=a.n(m),d=a(8),f=a(152),E=a(24),b=a.n(E),g="/api/blogs",v=null,h=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(g);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat("/api/users","/").concat(t));case 2:return a=e.sent,console.log(a.data.blogs),e.abrupt("return",a.data.blogs);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:v,"Content-Type":"multipart/form-data"}},e.next=3,b.a.post(g,t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:v}},e.next=3,b.a.delete("".concat(g,"/").concat(t.id),a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C={getAll:h,getAllFromUser:y,setToken:function(e){v="bearer ".concat(e)},create:w,updateLikes:function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:v}},e.next=3,b.a.put("".concat(g,"/").concat(t.id),t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteBlog:O,updateComments:function(){var e=Object(d.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("".concat(g,"/").concat(a.id,"/comments"),{comment:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},T=function(e){return{type:"FAIL_NOTIFICATION",data:e}},x=function(e){return{type:"SUCCESS_NOTIFICATION",data:e}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messageBody:"",messageType:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SUCCESS_NOTIFICATION":return{messageBody:t.data,messageStyle:"success"};case"FAIL_NOTIFICATION":return{messageBody:t.data,messageStyle:"warning"};case"INFO_NOTIFICATION":return{messageBody:t.data,messageStyle:"info"};case"CLEAR_NOTIFICATION":return{messageBody:"",messageType:""};default:return e}},j=function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getAll();case 2:a=e.sent,t({type:"INIT_BLOGS",data:{blogs:a}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOGS":return t.data.blogs;case"NEW_BLOG":return[].concat(Object(f.a)(e),[t.data.newBlog]);case"LIKE_BLOG":var a=t.data.updatedBlog,n=a.id;return e.map((function(e){return e.id!==n?e:a}));case"COMMENT_BLOG":var r=t.data.updatedBlog;return e.map((function(e){return e.id!==r.id?e:r}));case"DELETE_BLOG":return e.filter((function(e){return e.id!==t.data.id}));case"CLEAR_BLOGS":return[];default:return e}},S=a(9),k=a(257),N=a(254),B=a(7),A=function(e){var t=e.addComment,a=Object(S.c)((function(e){return e.user}));return r.a.createElement(B.d,{initialValues:{comment:""},onSubmit:function(e,a){var n=a.resetForm;(0,a.setSubmitting)(!0),t(e.comment),n({values:{comment:""}})}},(function(){return r.a.createElement(B.c,null,r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,null,"Comment as ".concat(a.name),":"),r.a.createElement(B.b,{name:"comment"},(function(e){var t=e.field;return r.a.createElement(k.a.Control,Object.assign({as:"textarea",rows:4},t,{placeholder:"What are your thoughts?"}))})),r.a.createElement(k.a.Text,{className:"text-muted"},"Please follow the community's rule! This application supports markdown syntax, try it out!")),r.a.createElement(N.a,{type:"submit",id:"create-comment"},"COMMENT"))}))},F=a(258),_=a(263),G=a(12),R=function(e){var t=e.blog,a=e.user,n=Object(S.b)(),c=Object(G.f)();if(a||c.push("/"),!t)return null;var l=function(){try{n((e=t,function(){var t=Object(d.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.updateLikes(e);case 2:n=t.sent,a({type:"LIKE_BLOG",data:{updatedBlog:n}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}catch(a){n(T("error updating the vlog")),setTimeout((function(){n({type:"CLEAR_NOTIFICATION"})}),3e3)}var e},u=function(){var e;if(window.confirm("Remove blog ".concat(t.title," by ").concat(t.author)))try{n((e=t,function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.deleteBlog(e);case 2:a({type:"DELETE_BLOG",data:{id:e.id}});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),c.push("/")}catch(a){n(T("error deleting the vlog, error: ".concat(a))),setTimeout((function(){n({type:"CLEAR_NOTIFICATION"})}),3e3)}},o=function(e){n(function(e,t){return function(){var a=Object(d.a)(p.a.mark((function a(n){var r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,C.updateComments(e,t);case 2:r=a.sent,n({type:"COMMENT_BLOG",data:{updatedBlog:r}});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(e,t))};return r.a.createElement("div",null,r.a.createElement(_.a,null,r.a.createElement(_.a.Header,null,t.title),r.a.createElement(_.a.Body,null,r.a.createElement(s.a,null,t.content)),r.a.createElement(_.a.Body,null,0!==t.images.length?r.a.createElement(F.a,{indicators:!1,interval:null,controls:1!==t.images.length},t.images.map((function(e){return r.a.createElement(F.a.Item,{key:e.url},r.a.createElement("img",{className:"d-block w-100",src:e.thumbnail,alt:e.filename}))}))):null),r.a.createElement(_.a.Body,null,r.a.createElement(_.a.Text,null,t.likes," likes"," ",r.a.createElement(N.a,{variant:"outline-success",onClick:l,className:"likeButton"},"LIKE"),t.user.id===a.id?r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{variant:"danger",onClick:u,className:"delete-button"},"REMOVE")):null)),r.a.createElement(_.a.Body,null,r.a.createElement(A,{blog:t,addComment:o})),r.a.createElement(_.a.Body,null,r.a.createElement(i,{blog:t}))))},U=a(260),q=function(){var e=Object(S.c)((function(e){return e.notification})),t=e.messageBody,a=e.messageStyle;return""===t?null:r.a.createElement(U.a,{key:t,variant:a},t)},P=a(77),H=r.a.forwardRef((function(e,t){var a=Object(n.useState)(!1),c=Object(P.a)(a,2),l=c[0],u=c[1],o={display:l?"none":"flex"},s={display:l?"":"none"},i=function(){u(!l)};return Object(n.useImperativeHandle)(t,(function(){return{toggleVisibility:i}})),r.a.createElement("div",null,r.a.createElement("div",{style:o},r.a.createElement(N.a,{onClick:i,id:"showForm",style:{marginLeft:"auto"}},e.buttonLabel)),r.a.createElement("div",{style:s},e.children))})),M=a(30),V=M.a().shape({title:M.b().min(8,"Too Short!").required("Required"),author:M.b().min(8,"Too Short!").required("Required"),url:M.b().min(8,"Too Short!").required("Required"),content:M.b().min(8,"Too Short!").required("Required")}),D=function(e){var t=e.toggleForm,a=Object(S.b)(),c=Object(n.useState)(null),l=Object(P.a)(c,2),u=l[0],o=l[1],s=Object(n.useRef)(null),i=function(e){o(e.target.files)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{variant:"primary"},r.a.createElement("h2",null,"Create a new blog")),r.a.createElement(B.d,{initialValues:{title:"",author:"",url:"",content:""},validationSchema:V,onSubmit:function(e,n){var r=n.resetForm,c=n.setSubmitting;c(!0);var l=new FormData;for(var i in u)l.append("files",u[i]);for(var m,f={title:e.title,author:e.author,url:e.url,content:e.content,date:Date.now()},E=0,b=Object.entries(f);E<b.length;E++){var g=Object(P.a)(b[E],2),v=g[0],h=g[1];l.append(v,h)}a((m=l,function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.create(m);case 3:a=e.sent,t({type:"NEW_BLOG",data:{newBlog:a}}),t(x("a new blog ".concat(a.title," by ").concat(a.author," created"))),setTimeout((function(){t({type:"CLEAR_NOTIFICATION"})}),3e3),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(T("Error creating a new blog ".concat(e.t0)));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())),c(!1),o(null),s.current.value="",r({values:{title:"",author:"",url:"",content:""}}),t()}},(function(){return r.a.createElement(B.c,null,r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,null,"Title:"),r.a.createElement(B.b,{name:"title",type:"input",as:k.a.Control,autoComplete:"off"}),r.a.createElement(B.a,{name:"title"},(function(e){return r.a.createElement(U.a,{variant:"warning"},e)}))),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,null,"Author:"),r.a.createElement(B.b,{name:"author",type:"input",as:k.a.Control,autoComplete:"off"}),r.a.createElement(B.a,{name:"author"},(function(e){return r.a.createElement(U.a,{variant:"warning"},e)}))),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,null,"Url:"),r.a.createElement(B.b,{name:"url",type:"input",as:k.a.Control,autoComplete:"off"}),r.a.createElement(B.a,{name:"url"},(function(e){return r.a.createElement(U.a,{variant:"warning"},e)}))),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,null,"Content:"),r.a.createElement(B.b,{name:"content"},(function(e){var t=e.field;return r.a.createElement(k.a.Control,Object.assign({as:"textarea",rows:4},t))})),r.a.createElement(B.a,{name:"content"},(function(e){return r.a.createElement(U.a,{variant:"warning"},e)}))),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.File,{id:"image",label:"Upload images",onChange:i,ref:s,multiple:!0})),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(N.a,{variant:"secondary",id:"cancel-button",onClick:t,style:{marginRight:"auto"}},"Cancel"),r.a.createElement(N.a,{variant:"primary",id:"create-button",type:"submit",style:{marginLeft:"auto"}},"Create")))})))},K={login:function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var W=function(e,t){return function(){var a=Object(d.a)(p.a.mark((function a(n){var r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,K.login({username:e,password:t});case 3:r=a.sent,window.localStorage.setItem("loggedBlogUser",JSON.stringify(r)),C.setToken(r.token),n({type:"SUCCESS",data:{user:r}}),n(x("User ".concat(r.username," logged in"))),n(j()),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:"FAIL"}),n(T("Wrong username or password"));case 15:setTimeout((function(){n({type:"CLEAR_NOTIFICATION"})}),2e3);case 16:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SUCCESS":case"TOKEN_USER":return t.data.user;case"SIGNOUT":case"FAIL":return null;default:return e}},z={fetchUsers:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ALL":return t.data.users;default:return e}},Q=a(18),X=a(255),Y=function(){var e=Object(S.c)((function(e){return e.users}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Users"),r.a.createElement(X.a,{striped:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"User"),r.a.createElement("th",null,"Number of blogs posted"))),r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(Q.b,{to:"/users/".concat(e.id)},e.name)),r.a.createElement("td",null,e.blogs.length))})))))},$=a(259),ee=a(261),te={padding:5},ae={margin:5},ne=function(){var e=Object(S.c)((function(e){return e.user})),t=Object(G.f)(),a=Object(G.g)(),n=Object(S.b)(),c=function(){var a=Object(d.a)(p.a.mark((function a(r){var c;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c=e.name,window.localStorage.removeItem("loggedBlogUser"),t.push("/"),n({type:"SIGNOUT"}),n({type:"CLEAR_BLOGS"}),n({type:"INFO_NOTIFICATION",data:"User ".concat(c," logged out")}),setTimeout((function(){n({type:"CLEAR_NOTIFICATION"})}),3e3);case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();if(!e)return r.a.createElement($.a,{collapseOnSelect:!0,expand:"lg",bg:"light"},r.a.createElement($.a.Brand,null,r.a.createElement(Q.b,{style:te,to:"/"},"Hang's Blog App")),r.a.createElement($.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement($.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(ee.a,{className:"mr-auto"}),"/signup"===a.pathname?r.a.createElement(ee.a,{className:"justify-content-end"},r.a.createElement(ee.a.Link,{as:Q.b,to:"/"},"Sign in")):r.a.createElement(ee.a,{className:"justify-content-end"},r.a.createElement(ee.a.Link,{as:Q.b,to:"/signup"},"Sign up"))));return r.a.createElement($.a,{collapseOnSelect:!0,expand:"lg",bg:"light"},r.a.createElement($.a.Brand,null,r.a.createElement(Q.b,{style:te,to:"/"},"Hang's Blog App")),r.a.createElement($.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement($.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(ee.a,{className:"mr-auto"},r.a.createElement(ee.a.Link,{as:Q.b,to:"/"},"Home"),r.a.createElement(ee.a.Link,{as:Q.b,to:"/users"},"Users")),r.a.createElement(ee.a,{className:"justify-content-end"}," ",r.a.createElement($.a.Text,null,"Hi, ",e.name,r.a.createElement(N.a,{variant:"secondary",style:ae,onClick:c},"Sign out")))))},re=function(e){var t=e.user;return t?r.a.createElement("div",null,r.a.createElement("h2",null,t.name),r.a.createElement("h3",null,"added blogs"),t.blogs.map((function(e){return r.a.createElement("li",{key:e.id},e.title)}))):null},ce=function(){var e=Object(S.c)((function(e){return e.user})),t=Object(S.b)(),a=function(){var a=Object(d.a)(p.a.mark((function a(n,r){var c,l;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c=r.resetForm,(l=r.setSubmitting)(!0),t(W(n.username,n.password)),l(!1),c(null===e?{values:{username:n.username,password:""}}:{values:{username:"",password:""}});case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}();return r.a.createElement("div",{style:{marginTop:"1rem"}},r.a.createElement(B.d,{initialValues:{username:"",password:""},onSubmit:a},(function(e){e.values,e.isSubmitting;return r.a.createElement(B.c,null,r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,null,"Username:"),r.a.createElement(B.b,{name:"username",type:"input",as:k.a.Control})),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,null,"Password:"),r.a.createElement(B.b,{name:"password",type:"password",as:k.a.Control})),r.a.createElement(N.a,{variant:"primary",type:"submit"},"Sign in"))})))},le={signUp:function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/users",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ue=M.a().shape({name:M.b().min(8,"Too Short!").max(15,"Too Long!").required("Required"),username:M.b().min(8,"Too Short!").max(15,"Too Long!").required("Required"),password:M.b().min(8,"Too Short!").max(15,"Too Long").required("Required"),confirmPassword:M.b().min(8,"Too Short!").max(15,"Too Long").required("Required")}),oe=function(e){var t={};return e.password!==e.confirmPassword&&(t.confirmPassword="Must be the same as password above"),t},se=function(){var e=Object(S.b)(),t=Object(G.f)();return r.a.createElement("div",{style:{marginTop:"1rem"}},r.a.createElement(B.d,{initialValues:{name:"",username:"",password:"",confirmPassword:""},validate:oe,validationSchema:ue,onSubmit:function(){var a=Object(d.a)(p.a.mark((function a(n,r){var c,l,u;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=r.resetForm,l=r.setSubmitting,n.password!==n.confirmPassword){a.next=17;break}return a.prev=2,l(!0),a.next=6,le.signUp({name:n.name,username:n.username,password:n.password});case 6:u=a.sent,e(x("New user ".concat(u.name," signed up"))),setTimeout((function(){e({type:"CLEAR_NOTIFICATION"})}),3e3),l(!1),c({values:{name:"",username:"",password:"",confirmPassword:""}}),t.push("/"),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(2),e(T(a.t0));case 17:case"end":return a.stop()}}),a,null,[[2,14]])})));return function(e,t){return a.apply(this,arguments)}}()},(function(){return r.a.createElement(B.c,null,r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,null,"Full Name:"),r.a.createElement(B.b,{name:"name",type:"input",as:k.a.Control,autoComplete:"off"}),r.a.createElement(B.a,{name:"name"},(function(e){return r.a.createElement(U.a,{variant:"warning"},e)}))),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,null,"Username:"),r.a.createElement(B.b,{name:"username",type:"input",as:k.a.Control,autoComplete:"off"}),r.a.createElement(B.a,{name:"username"},(function(e){return r.a.createElement(U.a,{variant:"warning"},e)}))),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,null,"Password:"),r.a.createElement(B.b,{name:"password",type:"password",as:k.a.Control,autoComplete:"off"}),r.a.createElement(B.a,{name:"password"},(function(e){return r.a.createElement(U.a,{variant:"warning"},e)}))),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,null,"Confirm Password:"),r.a.createElement(B.b,{type:"password",name:"confirmPassword",as:k.a.Control,autoComplete:"off"}),r.a.createElement(B.a,{name:"confirmPassword"},(function(e){return r.a.createElement(U.a,{variant:"warning"},e)}))),r.a.createElement(N.a,{variant:"primary",type:"submit"},"Sign Up"))})))},ie=a(75),me=a.n(ie),pe=a(99),de=a.n(pe);me.a.extend(de.a);var fe=function(){var e=Object(S.c)((function(e){return e.blogs}));return r.a.createElement("div",null,r.a.createElement(X.a,{striped:!0},r.a.createElement("tbody",null,e.sort((function(e,t){return t.likes-e.likes})).map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(Q.b,{to:"/blogs/".concat(e.id)},e.title)),r.a.createElement("td",null,"Posted by ",function(e){var t=e.user;return r.a.createElement(Q.b,{to:"/users/".concat(t.id)},t.username)}(e)," ".concat(me()(e.date).fromNow())))})))))},Ee=a(256);a(141);me.a.extend(de.a);var be=function(){var e=Object(S.b)(),t=Object(S.c)((function(e){return e.blogs})),a=Object(S.c)((function(e){return e.user})),c=Object(S.c)((function(e){return e.users})),l=Object(G.h)("/users/:id"),u=Object(G.h)("/blogs/:id"),o=l?c.find((function(e){return e.id===l.params.id})):null,s=u?t.find((function(e){return e.id===u.params.id})):null,i=Object(n.useRef)();Object(n.useEffect)((function(){var t=window.localStorage.getItem("loggedBlogUser");if(t){var a=JSON.parse(t);e(function(e){return C.setToken(e.token),{type:"TOKEN_USER",data:{user:e}}}(a)),e(j()),e(function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.fetchUsers();case 2:a=e.sent,t({type:"FETCH_ALL",data:{users:a}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),[e]);var m=function(){i.current.toggleVisibility()};return r.a.createElement("div",{className:"content"},r.a.createElement(ne,null),r.a.createElement(Ee.a,{style:{flex:"1 0 auto"}},r.a.createElement(q,null),r.a.createElement(G.c,null,r.a.createElement(G.a,{path:"/users/:id"},r.a.createElement("div",null,r.a.createElement(re,{user:o}))),r.a.createElement(G.a,{exact:!0,path:"/users"},r.a.createElement("div",null,r.a.createElement(Y,null))),r.a.createElement(G.a,{path:"/blogs/:id"},r.a.createElement("div",null,r.a.createElement(R,{blog:s,user:a}))),r.a.createElement(G.a,{path:"/signup"},r.a.createElement(se,null)),r.a.createElement(G.a,{exact:!0,path:"/"},null===a?r.a.createElement(ce,null):r.a.createElement("div",null,r.a.createElement(H,{buttonLabel:"Post a new blog",className:"newBlogToggle",ref:i},r.a.createElement("div",null,r.a.createElement(D,{toggleForm:m}))),r.a.createElement(fe,null))))))},ge=a(56),ve=a(150),he=a(151),ye=Object(ge.combineReducers)({blogs:L,user:J,notification:I,users:Z}),we=Object(ge.createStore)(ye,Object(he.composeWithDevTools)(Object(ge.applyMiddleware)(ve.a)));l.a.render([r.a.createElement(S.a,{store:we,key:"1"},r.a.createElement(Q.a,null,r.a.createElement(be,null))),r.a.createElement((function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("a",{href:"https://github.com/HangCcZ",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit"}},"App developed by Hang Chen"))}),{key:"2"})],document.getElementById("root"))}},[[153,1,2]]]);
//# sourceMappingURL=main.dc393318.chunk.js.map